jQuery(document).ready(function(a){function e(){a(".widget_multi_input").each(function(){var i=a(this),e=i.find(".widget_multi_value_field").val();if(0<e.length){var t=e.split("|");i.find(".widget_multi_fields").empty();i.parents(".widget_multi_input");a.each(t,function(e,t){i.find(".widget_multi_fields").append('<div class="set"><input type="text" value="'+t+'" class="widget_multi_single_field" /><span class="widget_multi_remove_field"><span class="dashicons dashicons-no-alt"></span></span></div>')})}})}function n(e){var t="";e.find(".widget_multi_fields .widget_multi_single_field").each(function(){t+=a(this).val()+"|"}),e.find(".widget_multi_value_field").val(t.slice(0,-1)).change()}function t(){a(".content-type").on("change",function(){var e=a(this),t=e.parent().parent(),i=t.find(".block"),n=t.find("."+e.val());i.removeClass("block").addClass("none"),n.removeClass("none").addClass("block")})}function i(){a(".shark-magazine-widget-chosen-select").chosen({width:"100%"})}a(document).on("click",".widget_multi_add_field",function(e){var t=a(e.currentTarget);e.preventDefault();var i=t.parents(".widget_multi_input");i.find(".widget_multi_fields").append('<div class="set"><input type="text" value="" class="widget_multi_single_field" /><span class="widget_multi_remove_field"><span class="dashicons dashicons-no-alt"></span></span></div>'),n(i)}).on("change",".widget_multi_single_field",function(){n(a(this).parents(".widget_multi_input"))}).on("click",".widget_multi_remove_field",function(e){e.preventDefault();var t=a(this),i=t.parents(".widget_multi_input");t.parent().remove(),n(i)}),e(),a(document).on("click",".shark-magazine-accordion",function(e){e.preventDefault(),a(this).next(".shark-magazine-panel").slideToggle()}),a(document).on("click",".upload_image_button",function(e){e.preventDefault();var t=a(this),i=wp.media.frames.file_frame=wp.media({title:"Select or upload image",library:{type:"image"},button:{text:"Select"},multiple:!1});i.on("select",function(){var e=i.state().get("selection").first().toJSON();t.prev("input").val(e.url)}),i.open()}),t(),i(),a(document).on("widget-updated widget-added",function(){i(),t(),e()})});